(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1373:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return L}));var a=c(39),n=c.n(a),o=c(1),s=c.n(o),i=c(6),l=c.n(i),r=c(531),d=c(522),u=c.n(d);var m={"淘宝":"taobao","天猫":"tmall","京东":"jingdong","京东自营":"jingdongSale","知乎":"zhihu","美团酒旅":"meituanhotel","苏宁":"suning","有赞":"youzan"},b=c(2),v=c.n(b),O=c(3),j={1:"正版保障 · 七天无理由退货",2:"正版保障 · 京东快递"},p=function(e){var t=e.className,c=e.style,a=e.imgUrl,n=e.title,o=e.price,s=void 0===o?0:o,i=e.source,r=e.productType,d=e.showBottomLine,u=void 0===d||d,b=e.abInfo,v=e.onClick,p="¥ ".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.trimZero,a=void 0!==c&&c,n=String(e).padStart(2,"0").slice(-2);return a&&"00"===n?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(n)}(parseInt(s))),g=i,h=(b||{}).params;"zhihu"===m[i]&&7===r&&(g="知乎 · 纸书");var f=(null==h?void 0:h.length)>0&&"0"!==h[0].value&&"zhihu"===m[i]&&7===r;return Object(O.c)("div",{className:l()("GoodsItemCard",t),style:Object.assign({},c,{height:f?122:94}),onClick:v},Object(O.c)("div",{className:"GoodsItemCard-left"},Object(O.c)("div",{className:"GoodsItemCard-imgLayer"}),Object(O.c)("img",{className:"GoodsItemCard-imgUrl",src:a,alt:"",onError:function(){}})),Object(O.c)("div",{className:"GoodsItemCard-right"},Object(O.c)("div",{className:"GoodsItemCard-title"},n),Object(O.c)("div",{className:"GoodsItemCard-footer"},Object(O.c)("span",{className:"GoodsItemCard-price"},p),Object(O.c)("span",{className:"GoodsItemCard-footerText"},g)),f&&Object(O.c)("span",{className:"GoodsItemCard-footerIcon"},j[h[0].value])),Object(O.c)("div",{className:"GoodsItemCard-bottomLine",style:{display:u?"block":"none"}}))};p.prototype={className:v.a.string,style:v.a.object,imgUrl:v.a.string.isRequired,title:v.a.string.isRequired,price:v.a.number,source:v.a.string.isRequired,productType:v.a.number,showBottomLine:v.a.bool,onClick:v.a.func};var g=p,h=c(653),f=c(57),C=c.n(f),k=function(){return Object(O.c)(s.a.Fragment,null)},N={SkeletonH01:function(e){var t=e.lineClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,c=e.blockClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:c}),Object(O.c)("div",null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,c=e.blockClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:c}),Object(O.c)("div",null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,c=e.blockClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",null,Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t})),Object(O.c)("div",{className:c}))},SkeletonC03:function(e){var t=e.lineClass,c=e.blockClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:c}),Object(O.c)("div",{style:{width:"100%"}},Object(O.c)("div",{className:t}),Object(O.c)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(O.c)(s.a.Fragment,null,Object(O.c)("div",{className:t}))},SkeletonSpacing:k,SkeletonFill:k},y=s.a.memo((function(e){var t,c=e.variant,a=void 0===c?"H01":c,n=e.height,o=e.width,s=void 0===o?"auto":o,i=e.animation,r=void 0===i?"ease-in":i,d="skeleton__line--".concat(a.toLowerCase()),u="skeleton--".concat(a.toLowerCase()),m=l()(C()({skeleton__block:!0},"skeleton__block--".concat(a.toLowerCase()),!0)),b=l()(C()({skeleton__line:!0},d,!0)),v=l()((t={skeleton:!0},C()(t,u,!0),C()(t,"skeleton--ease-in","ease-in"===r),t)),j={width:s};n&&["Spacing","Fill"].includes(a)&&(j.height="number"==typeof n?"".concat(n,"px"):n);var p=N["Skeleton".concat(a)];return Object(O.c)("section",{className:v,style:j},Object(O.c)(p,{variant:a,lineClass:b,blockClass:m}))}));y.propTypes={variant:v.a.string,height:v.a.oneOfType([v.a.string,v.a.number]),width:v.a.oneOfType([v.a.string,v.a.number]),animation:v.a.oneOfType([v.a.bool,v.a.string])};var S=y;var w=s.a.memo((function(e){var t=e.content,c=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),c=n()(t,2),a=c[0],o=c[1];return["Spacing","Fill"].includes(a)?{type:a,height:+o}:{type:a,count:+o||1}}))}(void 0===t?"T01":t);return Object(O.c)(s.a.Fragment,null,c.map((function(e,t){var c=e.type,a=e.count,n=e.height;return a?Array.from({length:a}).map((function(e,a){return Object(O.c)(S,{variant:c,key:"".concat(t,"-").concat(a)})})):Object(O.c)(S,{variant:c,height:n,key:"".concat(t,"-").concat(n)})})))}));w.prototype={content:Object(b.oneOfType)([Object(b.arrayOf)(b.string),b.string])};var T=w,G=c(42),I={"京东":"jingdong","淘宝":"taobao","拼多多":"pinduoduo","苏宁":"suning","美团酒旅":"meituanhotel","知乎":"zhihu","有赞":"youzan"},F=function(e){var t=e.className,c=e.style,a=e.showModal,i=void 0===a||a,d=e.withModal,m=void 0===d||d,b=e.modalTitle,v=void 0===b?"该商品的所有购买渠道":b,j=e.id,p=e.url,f=void 0===p?"":p,C=e.fetcherOptions,k=void 0===C?{}:C,N=e.scenes,y=void 0===N?0:N,S=e.fetcher,w=void 0===S?r.a:S,F=e.onClose,L=e.onSelectCard;Object(G.g)();var z=Object(o.useState)(0),_=n()(z,2),M=_[0],x=_[1],R=Object(o.useState)(!1),U=n()(R,2),B=U[0],E=U[1],q=Object(o.useState)([]),A=n()(q,2),H=A[0],J=A[1],P=Object(o.useState)(!1),D=n()(P,2),Z=D[0],K=D[1],Q=Object(o.useState)(null),V=n()(Q,2),W=V[0],X=V[1];Object(o.useEffect)((function(){Object(r.a)("/consume/bff/ab?name=book_kpwz").then((function(e){var t=e.data;t&&X({params:[t]})})).catch((function(){}))}),[]),Object(o.useEffect)((function(){E(!0);var e=f||"https://www.zhihu.com/api/v4/mcn/linkcard/".concat(j,"?scenes=").concat(y);w(e,k).then((function(e){var t=e.data,c=[];u()(t)||(c.push(Object.assign({},t,{children:null})),"[object Array]"===Object.prototype.toString.call(t.children)&&t.children.length&&(c=c.concat(t.children))),J(c)})).catch((function(){K(!0)})).finally((function(){setTimeout((function(){E(!1)}),500)}))}),[j,M]);var Y=Object(O.c)("div",{className:"GoodsCardList-container"},B?Object(O.c)(s.a.Fragment,null,Object(O.c)(T,{content:"C03,Spacing-26,C03",height:72})):Z?Object(O.c)("div",{className:"GoodsCardList-error"},Object(O.c)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(O.c)("div",{className:"GoodsCardList-errorBtn",onClick:function(){x(M+1)}},"刷新重试")):H.length?H.map((function(e){var t=e.id,c=e.skuid,a=e.title,n=e.url,o=e.img_url,s=e.price,i=e.source,l=e.product_type;return Object(O.c)(G.b,{key:"".concat(i,"-").concat(t,"-").concat(c),block:"goodsRecommend_polymericCardPopup_goodsCard",content:{type:"GoodsRecommend",id:"".concat(t,"-").concat(c,"-").concat(I[i])},extra:{link:{url:n}}},Object(O.c)(G.e,{shouldTrackShow:!0,shouldTrackClick:!0,className:"GoodsCardList-listItem",zaType:"Card",zaText:a,zaAction:"OpenUrl",zaEventType:"Click",extra:{link:{url:n}}},Object(O.c)(g,{title:a,imgUrl:o,price:s,source:i,productType:l,showBottomLine:!1,abInfo:W,onClick:function(){return t=e,void(L&&L(t));var t}})))})):null);return m?Object(O.c)(h.a,{className:l()("GoodsCardList",t),style:c,size:"large",title:v,onClose:F},i&&Y):Y};F.prototype={className:v.a.string,style:v.a.object,showModal:v.a.bool,withModal:v.a.bool,modalTitle:v.a.string,id:v.a.string,url:v.a.string,fetcherOptions:v.a.object,scenes:v.a.number,fetcher:v.a.func,onClose:v.a.func,onSelectCard:v.a.func};var L=F}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.872b1a47c6234e6ee84f.js.map